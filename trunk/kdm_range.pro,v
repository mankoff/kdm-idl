head	1.2;
access;
symbols;
locks
	mankoff:1.2; strict;
comment	@# @;


1.2
date	2009.01.31.05.50.48;	author mankoff;	state Exp;
branches;
next	1.1;

1.1
date	2009.01.31.05.50.25;	author mankoff;	state Exp;
branches;
next	;


desc
@@


1.2
log
@reverted to 1st version (from/to)
@
text
@;
;+
; NAME:
;	KDM_RANGE
;
; PURPOSE:
;   This function converts a variable or array from one scale to
;   another. The input data is assumed to be on the scale
;   [min(data),max(data)] although this can be customized. It is
;   converted to a new scale of the range
;   [rangemin,rangemax]. Overflow and underflow can be customized.
;
; CATEGORY:
;	Data massaging
;
; CALLING SEQUENCE:
;	result = KDM_RANGE( data, from, to )
;
; INPUTS:
;	DATA This is your input data set, either a single number or
;	multi-dimensional array
;
;   FROM: A 2 element array specifying the [min,max] input range of DATA
;   TO: A 2 element array specifying the desired output range of DATA
;
; KEYWORD PARAMETERS:
;   UNDERFLOW: This is value to set data points that convert to less
;              than RANGEMIN
;   OVERFLOW: This is value to set data points that convert to more
;             than RANGEMAX
;
; OUTPUTS:
;   This function returns the input array (data) scaled from FROM to TO
;
; RESTRICTIONS:
;   Output is always float.
;
; PROCEDURE:
;   Scale the input data to [0,1], then multiply by the desired
;   [minrange,maxrange] 
;
; EXAMPLE:
;   data = [-1, 0, 0.1, 1]
;
;   ; scale data to [0,100]
;   print, kdm_range( data, from=minmax(data), to=[0,100] )
;   ; -1 goes to 0, 1 goes to 100, and everything else betwixt...
;
;   ; scale data to [-1,0] output, but force the data input range to
;   ; [0,1]. Underflow (the -1 input value) should be set to -999
;   print, kdm_range( data,from=[-1,1],to=[-1, 0], datamin=0, underflow=-999 )
;
;
; MODIFICATION HISTORY:
; 	Written by:	Ken Mankoff, 2007-05.
;	2007-07-17: KDM. Re-wrote to use from and to arrays
;
;-


function kdm_range, data, from, to, $
  overflow=overflow,underflow=underflow

r = CHECK_MATH(/PRINT)

if n_elements(from) ne 2 OR $
   n_elements(to) ne 2 then begin
   message, "ERR: FROM and TO not specified correctly", /CONTINUE
   return, -999.99
endif

range = ( (float(data)-from[0]) / (from[1]-from[0]) ) * (to[1]-to[0])+to[0]

if CHECK_MATH(/PRINT) ne 0 then MESSAGE, "Math Error. Results Invalid."

if n_elements(underflow) ne 0 then begin
    un = where(range lt from[0], c)
    if c ne 0 then range[un] = underflow
endif
if n_elements(overflow) ne 0 then begin
    ov = where(range gt from[1], c)
    if c ne 0 then range[ov] = overflow
endif

return, range
end

@


1.1
log
@Initial revision
@
text
@a0 5
; $Id$
;
; $Author$
; $Revision$
; $Date$
d17 1
a17 1
;	result = KDM_RANGE( data, rangemin, rangemax )
d20 1
a20 1
;	data: This is your input data set, either a single number or
d23 2
a24 3
;   rangemin: This is the minimum value of the output
;
;   rangemax: This is the maximum value of the output
a26 4
;   DATAMIN: This is the minimum value of the input data. Defaults to
;            min(data).
;   DATAMAX: This is the maximum value of the input data. Defaults to
;            max(data) 
d33 1
a33 2
;   This function returns the input array (data) scaled to
;   [rangemin,rangemax].
d46 1
a46 1
;   print, kdm_range( data, 0,100 )
d51 1
a51 1
;   print, kdm_range( data, -1, 0, datamin=0, underflow=-999 )
d56 1
a56 2
;	2002-03-30: XYZ Made a change. Remember to change the stuff above 
;			if you add a new keyword or something!
d61 1
a61 2
function kdm_range, data, rangemin, rangemax, $
  datamin=datamin, datamax=datamax,$
d64 7
a70 2
function kdm_range, data, from=from, to=to, $
  overflow=overflow,underflow=underflow
d72 1
a72 2
if n_elements(from) eq 0 then from = minmax(data)
if n_elements(to) eq 0 then to = minmax(data)
d74 1
a74 6
if n_elements(rangemin) eq 0 then rangemin = min(data)
if n_elements(rangemax) eq 0 then rangemax = max(data)
if n_elements(datamin) eq 0 then datamin = min(data)
if n_elements(datamax) eq 0 then datamax = max(data)
range = ( (float(data)-datamin) / (datamax-datamin) ) * $
        (rangemax-rangemin)+rangemin
d77 1
a77 1
    un = where(range lt rangemin, c)
d81 1
a81 1
    ov = where(range gt rangemax, c)
a87 3
;
; $Log$

@
